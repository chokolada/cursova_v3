# Курсова робота: Система управління готелем

## Виконано варіант 3

### Студент
**Варіант:** 3

### Назва проекту
Система управління готелем з веб-інтерфейсом

---

## Опис проекту

Повнофункціональна система управління готелем з роздільними інтерфейсами для клієнтів та менеджерів готелю. Система дозволяє користувачам переглядати доступні номери, здійснювати бронювання, а менеджерам - керувати номерами та переглядати всі бронювання.

---

## Технічна реалізація

### Backend (FastAPI)

**Використані технології:**
- FastAPI - сучасний високопродуктивний веб-фреймворк
- PostgreSQL - реляційна база даних
- SQLAlchemy - асинхронний ORM
- Alembic - система міграцій бази даних
- JWT (JSON Web Tokens) - для авторизації
- Bcrypt - для безпечного хешування паролів
- Poetry - управління залежностями
- Pydantic - валідація даних

**Архітектурний патерн:** MVC (Model-View-Controller)

**Реалізовані вимоги:**

1. **PostgreSQL база даних**
   - Повністю асинхронна робота з БД через asyncpg
   - Міграції через Alembic
   - Три основні таблиці: users, rooms, bookings

2. **Dependency Injection**
   - Репозиторії впроваджуються через FastAPI Depends
   - Контролери отримують репозиторії через DI
   - Чіткий поділ відповідальності

3. **JWT Авторизація**
   - Безпечне зберігання паролів (bcrypt hashing)
   - JWT токени з обмеженим терміном дії
   - Автоматична валідація токенів

4. **Role-Based Access Control (RBAC)**
   - Три ролі: user, manager, admin
   - Користувачі можуть тільки переглядати та бронювати
   - Менеджери мають повний доступ до CRUD операцій
   - Захист endpoints через dependency

5. **MVC Архітектура**
   ```
   Models (app/models/) → Контролери (app/controllers/) → Views (app/views/)
                ↓
          Repositories (app/repositories/)
                ↓
          Dependencies (app/dependencies/)
   ```

### Frontend (React)

**Використані технології:**
- React 18 - бібліотека для побудови UI
- React Router - маршрутизація
- Context API - управління глобальним станом
- Axios - HTTP клієнт
- CSS - власні стилі без фреймворків

**Реалізовані сторінки:**

1. **Сторінка готелю (для клієнтів)**
   - Перегляд всіх доступних номерів
   - Фільтрація за доступністю
   - Фільтрація за типом номера
   - Картки номерів з детальною інформацією
   - Форма бронювання
   - Перегляд власних бронювань

2. **Адміністративна панель (для менеджерів)**
   - Повне CRUD управління номерами
   - Перегляд всіх бронювань
   - Статистика по бронюванням
   - Зміна доступності номерів

**Реалізовані компоненти:**
- Navbar - навігаційне меню з авторизацією
- ProtectedRoute - захист маршрутів
- RoomCard - картка номера
- Форми авторизації та реєстрації
- Форма бронювання
- Таблиці для адміністратора

---

## Структура бази даних

### Таблиця `users`
- id (PK)
- email (unique)
- username (unique)
- hashed_password
- full_name
- role (enum: user, manager, admin)
- is_active

### Таблиця `rooms`
- id (PK)
- room_number (unique)
- room_type
- price_per_night
- capacity
- description
- amenities
- is_available
- floor
- image_url

### Таблиця `bookings`
- id (PK)
- user_id (FK → users)
- room_id (FK → rooms)
- check_in_date
- check_out_date
- guests_count
- total_price
- status (enum: pending, confirmed, cancelled, completed)
- special_requests
- created_at
- updated_at

**Зв'язки:**
- User → Bookings (One-to-Many)
- Room → Bookings (One-to-Many)

---

## API Endpoints

### Авторизація (`/api/auth`)
- `POST /register` - Реєстрація
- `POST /login` - Вхід (отримання JWT)

### Користувачі (`/api/users`)
- `GET /me` - Поточний користувач
- `GET /` - Всі користувачі (manager only)
- `GET /{id}` - Деталі користувача (manager only)
- `PUT /{id}` - Оновити користувача (manager only)
- `DELETE /{id}` - Видалити користувача (manager only)

### Номери (`/api/rooms`)
- `GET /` - Список номерів (з фільтрами)
- `GET /{id}` - Деталі номера
- `POST /` - Створити номер (manager only)
- `PUT /{id}` - Оновити номер (manager only)
- `DELETE /{id}` - Видалити номер (manager only)

### Бронювання (`/api/bookings`)
- `GET /my` - Мої бронювання
- `GET /all` - Всі бронювання (manager only)
- `GET /{id}` - Деталі бронювання
- `POST /` - Створити бронювання
- `PUT /{id}` - Оновити бронювання
- `POST /{id}/cancel` - Скасувати
- `DELETE /{id}` - Видалити (manager only)

---

## Безпека

### Реалізовані механізми:

1. **Хешування паролів**
   - Використання bcrypt з автоматичним salt
   - Паролі ніколи не зберігаються в відкритому вигляді

2. **JWT Токени**
   - Підписані секретним ключем
   - Обмежений термін дії (30 хвилин)
   - Автоматична валідація при кожному запиті

3. **Role-Based Access Control**
   - Перевірка ролей на рівні endpoints
   - Користувачі не можуть отримати доступ до адмін функцій
   - Middleware для автоматичної перевірки прав

4. **Валідація даних**
   - Pydantic схеми для всіх вхідних даних
   - Автоматична валідація типів
   - Захист від SQL injection через ORM

5. **CORS**
   - Налаштовані дозволені origins
   - Захист від небажаних запитів

---

## Функціонал для різних ролей

### Звичайний користувач (user)
✅ Реєстрація та авторизація
✅ Перегляд доступних номерів
✅ Фільтрація номерів
✅ Створення бронювання
✅ Перегляд власних бронювань
✅ Скасування бронювання
❌ Доступ до адмін панелі
❌ Створення/видалення номерів

### Менеджер (manager)
✅ Всі права користувача
✅ Доступ до адмін панелі
✅ Створення нових номерів
✅ Редагування номерів
✅ Видалення номерів
✅ Зміна доступності номерів
✅ Перегляд всіх бронювань
✅ Управління користувачами

### Адміністратор (admin)
✅ Всі права менеджера
✅ Повний доступ до системи

---

## Як запустити проект

### Вимоги
- Python 3.11+
- Node.js 16+
- PostgreSQL 14+
- Poetry

### Швидкий старт

**1. База даних:**
```sql
CREATE DATABASE hotel_db;
CREATE USER hotel_user WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE hotel_db TO hotel_user;
```

**2. Backend:**
```bash
cd backend
poetry install
cp .env.example .env
# Відредагуйте .env
poetry run alembic upgrade head
poetry run uvicorn app.main:app --reload
```

**3. Frontend:**
```bash
cd frontend
npm install
npm start
```

**4. Відкрийте:**
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs

### Тестові дані

Створіть користувачів через форму реєстрації або API:

**Користувач:**
```json
{
  "username": "user",
  "email": "user@hotel.com",
  "password": "user12345",
  "role": "user"
}
```

**Менеджер:**
```json
{
  "username": "manager",
  "email": "manager@hotel.com",
  "password": "manager123",
  "role": "manager"
}
```

Створіть номери через адмін панель після входу як менеджер.

---

## Реалізовані вимоги курсової роботи

### ✅ Backend
- [x] FastAPI фреймворк
- [x] PostgreSQL база даних
- [x] Dependency Injection pattern
- [x] JWT авторизація
- [x] Хешування паролів (bcrypt)
- [x] Role-Based Access Control
- [x] MVC архітектура
- [x] Асинхронна робота з БД
- [x] Міграції (Alembic)
- [x] RESTful API
- [x] Валідація даних (Pydantic)

### ✅ Frontend
- [x] React додаток
- [x] Сторінка готелю для клієнтів
- [x] Адміністративна панель для менеджерів
- [x] Маршрутизація (React Router)
- [x] Управління станом (Context API)
- [x] Захищені маршрути
- [x] Інтеграція з Backend API
- [x] Респонсивний дизайн

### ✅ Додаткові покращення
- [x] Повна документація (README.md)
- [x] Git з осмисленими комітами
- [x] Інструкції по встановленню
- [x] Swagger документація API
- [x] Обробка помилок
- [x] CORS налаштування
- [x] Фільтрація та пошук
- [x] Статуси бронювань
- [x] Автоматичний розрахунок ціни

---

## Git історія

Проект має структуровану історію комітів:
1. Initial commit - структура та .gitignore
2. Backend implementation - повна реалізація API
3. Frontend implementation - React додаток
4. Documentation - детальні README та SETUP

---

## Висновки

Реалізована повнофункціональна система управління готелем, яка демонструє:

1. **Сучасні технології**: FastAPI, React, PostgreSQL
2. **Правильні паттерни**: MVC, Dependency Injection, Repository
3. **Безпеку**: JWT, RBAC, хешування паролів
4. **Якісний код**: структурований, документований, з поділом відповідальності
5. **User Experience**: інтуїтивний інтерфейс для різних типів користувачів

Проект готовий до розгортання та масштабування.

---

## Файли проекту

```
курсова/
├── backend/              # Backend API (FastAPI)
├── frontend/             # Frontend (React)
├── README.md            # Загальна документація
├── SETUP.md             # Інструкції по встановленню
└── ПРОЕКТ.md           # Цей файл
```

Детальна документація знаходиться в:
- `backend/README.md` - документація Backend
- `frontend/README.md` - документація Frontend
- `SETUP.md` - крок-за-кроком інструкції

---

**Дата виконання:** Грудень 2025
**Статус:** ✅ Завершено
